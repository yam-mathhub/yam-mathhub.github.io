<html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="keywords" content="">
  <script src="https://kit.fontawesome.com/92e8f6cdc3.js" crossorigin="anonymous"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@200..900&display=swap" rel="stylesheet">
  <link href="" rel="shortcut icon" />
  <title>Yam Mathhub - Home</title>

  <style>:root {
  --bg-color: #fff;
  --topic-bg-color: #fff;
  --text-color: #000;
  --text2-color: #999;
  --border-color: #ccc;
}
:root.dark {
  --bg-color: #181818;
  --topic-bg-color: #333;
  --text-color: #ffffff;
  --text2-color: #aaaaaa;
  --border-color: #444444;
}

body {
  font-family: Arial, san-serif;
  margin: 0;
  padding: 0;
  position: relative;
  -webkit-tap-highlight-color: transparent;
  background-color: var(--bg-color);
  color: var(--text-color);
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

header {
  padding: 20px 15px 0;
  margin: 0 0 50px;
}
header span {
  font-size: 14px;
}
header h2 {
  margin: 0 0 -2px;
  font-size: 28px;
}
header h4 {
  margin: 0;
  font-weight: normal;
  font-size: 16px;
}

.colors {
  position: absolute;
  right: 15px;
  top: 15px;
  color: var(--text2-color);
}
.colors div {
  display: inline-block;
  padding: 0 2px 0;
  margin: 0 2px 0;
  font-size: 20px;
  cursor: pointer;
  transition: transform 0.2s ease, color 0.3s ease;
}
.colors div:hover {
  transform: scale(1.1);
}
.colors div:active {
  transform: scale(1);
}

.topic-tit {
  font-size: 18px;
  font-weight: bold;
  padding: 0 15px 10px;
}
.topic-shell {
  margin: 0 0 50px;
}

.topic {
  font-size: 16px;
  border-top: 1px var(--border-color) solid;
  background-color: var(--topic-bg-color);
}

.block {
  position: relative;
  cursor: pointer;
  border-bottom: 1px var(--border-color) solid;
  padding: 12px 20px 12px;
  background-color: var(--bg-color);
  display: flex;
  align-items: center;
  flex-direction: row;
}
.block:hover {
  background-color: rgba(95, 189, 255, 0.15);
}
.block i {
  aposition: absolute;
  atop: 0;
  abottom: 0;
  aleft: 0;
  color: var(--text2-color);
  margin-right: 15px;
  width: 20px;
  text-align: center;
  zborder: 1px red solid;
}
#sub i {
  padding-left: 20px;
}
.name {
  display: block;
  margin: 2px 0 0;
  font-size: 12px;
  color: var(--text2-color);
}
#sum{
  margin:0 0 30px;
}

.tit {
  cursor: pointer;
  padding: 15px 15px 15px;
  border-bottom: 1px var(--border-color) solid;
  background-color: var(--topic-bg-color);
  position: sticky;
  top: 0px;
  filter: brightness(0.95);
}
.tit span {
  padding-left: 5px;
}

summary {
  position: relative;
  z-index: 900;
}
summary::marker,
summary::-webkit-details-marker {
  display: inline-block;
  font-size: 12px;
  color: var(--text-color);
}

@media screen and (min-width: 768px) {
  header {
    padding: 20px 25vw 15px;
  }

  .topic-tit {
    padding: 0 25vw 10px;
  }

  .topic-shell {
    padding: 0 25vw 20px;
  }

  .topic {
    border-left: 1px var(--border-color) solid;
    border-right: 1px var(--border-color) solid;
    jmargin: 0 0 40px;
  }

  .bnt-shell {
    display: block;
    margin: -60px 0 50px;
  }

  .bnt-shell button:nth-child(1) {
    left: 25vw;
  }

  .bnt-shell button:nth-child(2) {
    right: 25vw;
  }
}

.game-shell {
  position: fixed;
  z-index: 1000;
  bottom: 0;
  width: 100%;
  height: 80px;
  display: inline-block;
  background: var(--bg-color);
  background: linear-gradient(0deg, var(--bg-color) 20%, rgba(0, 0, 0, 0) 100%);
  transition: background 0.3s ease;
}

#hide {
  position: fixed;
  z-index: 1001;
  bottom: 0;
  right: 0;
  color: var(--text2-color);
  padding: 15px;
  font-size: 16px;
  cursor: pointer;
  transition: color 0.3s ease;
}
#hide:hover {
  transform: scale(1.1);
}
#hide:active {
  transform: scale(1);
}

.my-pet-shell {
  position: absolute;
  z-index: 80;
  padding: 10px 30px 5px;
  transition: right 0.1s ease;
}
#pet-wrapper {
  display: inline-block;
}
#my-pet {
  position: relative;
  font-size: 34px;
  cursor: pointer;
  animation: 0.6s ease-in-out infinite walk;
}
#my-pet:after {
  content: "";
  z-index: -1;
  position: absolute;
  left: 10px;
  right: 10px;
  bottom: 0;
  height: 8px;
  background-color: rgba(0, 0, 0, 0.2);
  border-radius: 50%;
  filter: blur(3px);
  -webkit-filter: blur(3px);
}
#pet-say {
  position: absolute;
  top: -20px;
  left: 50%;
  transform: translateX(-50%);
  padding: 4px 8px;
  font-size: 12px;
  border: 1px var(--border-color) solid;
  border-radius: 8px;
  background-color: var(--topic-bg-color);
  color: var(--text-color);
  opacity: 0;
  transition: opacity 0.5s ease;
  white-space: nowrap;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}
#blood {
  position: absolute;
  top: -2px;
  bottom: -4px;
  left: -2px;
  right: -2px;
  z-index: 100;
  opacity: 0;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  background-image: url("https://251131395.github.io/media/image/blood.png");
  transition: opacity 0.3s ease;
  filter: hue-rotate(80deg);
  -webkit-filter: hue-rotate(80deg);
}

@keyframes walk {
  0% {
    transform: scaleX(1);
  }

  48% {
    transform: scaleX(1.15);
  }

  52% {
    transform: scaleX(1.15);
  }

  100% {
    transform: scaleX(1);
  }
}
@keyframes shake {
  0% {
    transform: translateX(0) rotate(0deg);
  }

  25% {
    transform: translateX(-2px) rotate(-1deg);
  }

  50% {
    transform: translateX(2px) rotate(1deg);
  }

  75% {
    transform: translateX(-2px) rotate(-1deg);
  }

  100% {
    transform: translateX(0) rotate(0deg);
  }
}
@keyframes heartFloat {
  0% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }

  100% {
    opacity: 0;
    transform: translateY(-100px) scale(0.5);
  }
}

@media screen and (max-width: 600px) {
  #my-pet {
    font-size: 28px;
  }

  #pet-say {
    font-size: 12px;
    padding: 3px 6px;
  }
}

  </style>
</head>

<body>
  <header>
    <div class="colors">
      <div id="theme-toggle" style="width: 28px; text-align:right;"><i class="fa-solid fa-sun"></i></div>
    </div>

    <span>å“©åº¦ä¿‚</span>
    <h2>Yam Mathhub</h2>
    <h4>Yamæ•´åˆå’—å•²ç¶²ä¸Šæ•¸å­¸è³‡æºï¼Œå¸Œæœ›å¯ä»¥å¹«åˆ°ä½ </h4>
  </header>

  <div style="min-height:100vh">
    <div id="content-container">
      <!-- Content will be dynamically generated from XML -->
    </div>
    <div style="height:100px;"></div>
  </div>

  <!-- XML Data embedded in the HTML -->
  <script type="text/xml" id="math-data">
    <mathHub>
      <section id="useful-tools" title="Useful Tools">
        <category title="Calculator">
          <item title="Desmos" icon="fa-solid fa-calculator" url="https://www.desmos.com/?lang=en" />
          <item title="Derivative Calculator" icon="fa-solid fa-calculator" url="https://www.derivative-calculator.net/" author="David Scherfgen" />
          <item title="Integral Calculator" icon="fa-solid fa-calculator" url="https://www.integral-calculator.com/" author="David Scherfgen" />
        </category>
        <category title="Typesetting">
          <item title="LaTeX" icon="fa-solid fa-file-lines" url="https://www.latex-project.org/" />
          <item title="Overleaf" icon="fa-solid fa-file-lines" url="https://www.overleaf.com/" sub="true" />
        </category>
        <category title="Others">
          <item title="SageMath" icon="fa-solid fa-wrench" url="https://doc.sagemath.org/" />
        </category>
      </section>
      
      <section id="dse-math" title="DSE Math">
        <category title="Summary" id="sum">
          <item title="E-book for DSE Math" icon="fa-solid fa-book" author="Yam" />
        </category>
        <category title="ä»£æ•¸ Algebra">
          <item title="äºŒæ¬¡æ–¹ç¨‹ Quadratic Equation" icon="fa-regular fa-file-lines" />
          <item title="äºŒæ¬¡æ–¹ç¨‹ Quadratic Equation" icon="fa-regular fa-file-lines" sub="true" />
          <item title="è¤‡æ•¸ Complex Number" icon="fa-regular fa-file-lines" />
          <item title="å‡½æ•¸åŠå…¶åœ–åƒ Functions &amp; Graph" icon="fa-regular fa-file-lines" />
          <item title="æŒ‡æ•¸èˆ‡å°æ•¸å‡½æ•¸ Exponential &amp; Logarithmic Functions" icon="fa-regular fa-file-lines" />
          <item title="å¤šé …å¼ Polynomial" icon="fa-regular fa-file-lines" />
          <item title="è®Šåˆ† Variation" icon="fa-regular fa-file-lines" />
          <item title="ç­‰å·®èˆ‡ç­‰æ¯”æ•¸åˆ— Arithmetic &amp; Geometric Sequence" icon="fa-regular fa-file-lines" />
          <item title="ä¸ç­‰å¼èˆ‡ç·šæ€§è¦åŠƒ Inequalities &amp; Linear Programming" icon="fa-regular fa-file-lines" />
        </category>
        <category title="å¹¾ä½• Geometry">
          <item title="åœ“ Circle" icon="fa-regular fa-file-lines" />
          <item title="ç›´ç·šæ–¹ç¨‹ Equations of Straight Line" icon="fa-regular fa-file-lines" />
          <item title="åœ“æ–¹ç¨‹ Equations of Circle" icon="fa-regular fa-file-lines" />
          <item title="è»Œè·¡ Locus" icon="fa-regular fa-file-lines" />
          <item title="ä¸‰è§’æ¯” Trigonometric Ratio" icon="fa-regular fa-file-lines" />
          <item title="ä¸‰è§’å­¸çš„å¹³é¢æ‡‰ç”¨ Application of Trigonometry in 2D Problems" icon="fa-regular fa-file-lines" />
          <item title="ä¸‰è§’å­¸çš„ä¸‰ç¶­æ‡‰ç”¨ Application of Trigonometry in 3D Problems" icon="fa-regular fa-file-lines" />
        </category>
        <category title="çµ±è¨ˆ Statistics">
          <item title="æ’åˆ—èˆ‡çµ„åˆ Permutation &amp; Combination" icon="fa-regular fa-file-lines" />
          <item title="æ¦‚ç‡ Probability" icon="fa-regular fa-file-lines" />
          <item title="é›¢å·®çš„åº¦é‡ Measures of Dispersion" icon="fa-regular fa-file-lines" />
        </category>
      </section>
      
      <section id="dse-m2" title="DSE M2">
        <category title="Summary" id="sum">
          <item title="E-book for DSE M2" icon="fa-solid fa-book" author="Yam" />
        </category>
        <category title="Mathematical Induction">
          <item title="" icon="fa-regular fa-file-lines" />
        </category>
        <category title="The Binomial Theorem">
          <item title="" icon="fa-regular fa-file-lines" />
        </category>
        <category title="Trigonometric Functions">
          <item title="" icon="fa-regular fa-file-lines" />
        </category>
        <category title="Limits and Derivatives">
          <item title="" icon="fa-regular fa-file-lines" />
        </category>
      </section>
      
      <section id="other-topics" title="Other Topics">
        <category title="Linear Algebra">
          <item title="Linear Algebra (Full Course)" icon="fa-brands fa-youtube" url="https://www.youtube.com/playlist?list=PLHXZ9OQGMqxfUl0tcqPNTJsb7R6BqSLo6" author="Dr. Trefor Bazett" />
          <item title="Understanding Linear Algebra" icon="fa-solid fa-book" url="https://understandinglinearalgebra.org/ula.html" author="David Austin" />
        </category>
        <category title="Multivariable Calculus">
          <item title="Calculus 3 (Full Length Videos)" icon="fa-brands fa-youtube" url="https://www.youtube.com/playlist?list=PLDesaqWTN6ESk16YRmzuJ8f6-rnuy0Ry7" author="Professor Leonard" />
          <item title="CLP-3 Multivariable Calculus" icon="fa-solid fa-book" url="https://personal.math.ubc.ca/~CLP/CLP3/clp_3_mc/frontmatter-2.html" author="Joel Feldman, Andrew Rechnitzer, Elyse Yeager" />
        </category>
      </section>
    </mathHub>
  </script>

  <div id="hide"><i class="fa-solid fa-eye"></i></div>
  <div class="game-shell">
    <div class="my-pet-shell">
      <div id="pet-say">âœ¨</div>
      <div id="pet-wrapper">
        <div id="my-pet">
          <div id="blood"></div>
          ğŸˆ
        </div>
      </div>
    </div>
  </div>

  <script>
    // XML Parsing and Content Generation
    function parseXMLData() {
      const xmlScript = document.getElementById('math-data');
      const parser = new DOMParser();
      const xmlDoc = parser.parseFromString(xmlScript.textContent, 'text/xml');
      return xmlDoc;
    }

    function generateContent() {
      const xmlDoc = parseXMLData();
      const container = document.getElementById('content-container');
      const sections = xmlDoc.querySelectorAll('section');
      
      let html = '';
      
      sections.forEach(section => {
        const sectionTitle = section.getAttribute('title');
        html += `<div class="topic-tit">${sectionTitle}</div>`;
        html += `<div class="topic-shell">`;
        
        const categories = section.querySelectorAll('category');
        categories.forEach(category => {
          const categoryTitle = category.getAttribute('title');
          const categoryId = category.getAttribute('id') || '';
          
          html += `<div class="topic"${categoryId ? ` id="${categoryId}"` : ''}>`;
          html += `<details>`;
          html += `<summary class="tit"><span>${categoryTitle}</span></summary>`;
          
          const items = category.querySelectorAll('item');
          items.forEach(item => {
            const title = item.getAttribute('title');
            const icon = item.getAttribute('icon');
            const url = item.getAttribute('url');
            const author = item.getAttribute('author');
            const isSub = item.getAttribute('sub') === 'true';
            
            let clickHandler = '';
            if (url) {
              clickHandler = `onclick="window.open('${url}', '_blank');"`;
            }
            
            html += `<div class="block"${isSub ? ' id="sub"' : ''} ${clickHandler}>`;
            html += `<i class="${icon}"></i>`;
            
            if (title || author) {
              if (author) {
                html += `<span>${title}<span class="name">${author}</span></span>`;
              } else {
                html += title;
              }
            }
            
            html += `</div>`;
          });
          
          html += `</details>`;
          html += `</div>`;
        });
        
        html += `</div>`;
      });
      
      container.innerHTML = html;
    }

    // Dark mode management
    let isDarkMode = false;
    // Check system preference for dark mode
    function checkSystemTheme() {
      return window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
    }
    // Toggle dark mode
    function toggleDarkMode() {
      isDarkMode = !isDarkMode;
      updateTheme();
      updateThemeToggleIcon();
    }
    // Update theme based on current settings
    function updateTheme() {
      const root = document.documentElement;
      if (isDarkMode) {
        root.classList.add('dark');
      } else {
        root.classList.remove('dark');
      }
    }
    // Update theme toggle icon
    function updateThemeToggleIcon() {
      const toggleButton = document.getElementById('theme-toggle');
      const icon = toggleButton.querySelector('i');
      if (isDarkMode) {
        icon.className = 'fa-solid fa-moon';
      } else {
        icon.className = 'fa-solid fa-sun';
      }
    }
    // å® ç‰©è¡¨æƒ…åˆ—è¡¨
    const petEmojis = [
      "ğŸ•",
      "ğŸˆ",
      "ğŸˆâ€â¬›",
      "ğŸ“",
      "ğŸ",
      "ğŸ„",
      "ğŸ¦†",
      "ğŸ’¸",
      "ğŸ¦ ",
      "ğŸª…",
      "ğŸ§±",
      "ğŸ§½",
      "âœï¸",
      "ğŸ©",
      "ğŸ›",
      "ğŸ¦—",
      "ğŸª³",
      "ğŸª°",
      "ğŸ¦­",
      "ğŸ¦•",
      "ğŸ¦–",
      "ğŸ¦",
      "ğŸ‹"
    ];
    // é¼“å‹µèªå¥
    const encouragements = [
      "åŠ æ²¹å‘€",
      "ç¹¼çºŒåŠªåŠ›",
      "ç›¸ä¿¡è‡ªå·±ï¼",
      "çŸ¥è­˜å°±ä¿‚åŠ›é‡",
      "ä½ é€²æ­¥ç·Šå˜…~",
      "å …æŒå°±ä¿‚å‹åˆ©",
      "æˆ‘å“‹ä¸€é½ŠåŠªåŠ›å–",
      "æ¯æ—¥éƒ½é€²æ­¥å•²å•²",
      "ä¿æŒå¥½å¥‡å¿ƒ"
    ];
    let pet = document.getElementById("my-pet");
    let petWrapper = document.getElementById("pet-wrapper");
    let petSay = document.getElementById("pet-say");
    let gameShell = document.querySelector(".game-shell");
    let petShell = document.querySelector(".my-pet-shell");
    let isWalking = true;
    let needsAttention = false;
    let walkDirectionX = 1; // 1ç‚ºå‘å³ï¼Œ-1ç‚ºå‘å·¦
    let walkDirectionY = 0; // 1ç‚ºå‘ä¸Šï¼Œ-1ç‚ºå‘ä¸‹ï¼Œ0ç‚ºæ°´å¹³
    let currentX = window.innerWidth - 100; // åˆå§‹Xä½ç½®
    let currentY = 10; // åˆå§‹Yä½ç½®ï¼ˆè·é›¢åº•éƒ¨ï¼‰
    let isPaused = false; // æ˜¯å¦æš«åœè¡Œèµ°
    let pauseTime = 0; // æš«åœè¨ˆæ™‚å™¨
    let directionChangeTimer = 0; // æ–¹å‘æ”¹è®Šè¨ˆæ™‚å™¨
    let clickCount = 0; // é»æ“Šè¨ˆæ•¸å™¨
    let clickTimestamps = []; // é»æ“Šæ™‚é–“æˆ³é™£åˆ—
    let isDead = false; // æ˜¯å¦æ­»äº¡
    let isHidden = false; // æ˜¯å¦éš±è—
    // éšæœºé€‰æ‹©å® ç‰©
    function randomizePet() {
      const randomIndex = Math.floor(Math.random() * petEmojis.length);
      const emojiText = petEmojis[randomIndex];
      pet.innerHTML = `<div id="blood"></div>${emojiText}`;
    }
    // éš¨æ©Ÿæ”¹è®Šæ–¹å‘
    function randomChangeDirection() {
      const directions = [{
          x: 1,
          y: 0
        }, // å‘å³
        {
          x: -1,
          y: 0
        }, // å‘å·¦
        {
          x: 1,
          y: 1
        }, // å³ä¸Š
        {
          x: -1,
          y: 1
        }, // å·¦ä¸Š
        {
          x: 1,
          y: -1
        }, // å³ä¸‹
        {
          x: -1,
          y: -1
        }, // å·¦ä¸‹
        {
          x: 0,
          y: 1
        }, // å‘ä¸Š
        {
          x: 0,
          y: -1
        } // å‘ä¸‹
      ];
      const newDirection =
        directions[Math.floor(Math.random() * directions.length)];
      walkDirectionX = newDirection.x;
      walkDirectionY = newDirection.y;
      // é‡ç½®æ–¹å‘æ”¹è®Šè¨ˆæ™‚å™¨
      directionChangeTimer = Math.floor(Math.random() * 180) + 120;
    }
    // ç§»å‹•å¯µç‰©
    function movePet() {
      if (!isWalking || isDead) return;
      // èµ°èµ°åœåœé‚è¼¯
      if (isPaused) {
        pauseTime--;
        if (pauseTime <= 0) {
          isPaused = false;
          pet.style.animation = "0.6s ease-in-out infinite walk";
        }
        return;
      }
      // éš¨æ©Ÿæš«åœ
      if (Math.random() < 0.008) {
        isPaused = true;
        pauseTime = Math.floor(Math.random() * 60) + 30;
        pet.style.animation = "none";
        return;
      }
      // æ–¹å‘æ”¹è®Šè¨ˆæ™‚å™¨å€’æ•¸
      directionChangeTimer--;
      // éš¨æ©Ÿæ”¹è®Šæ–¹å‘
      if (directionChangeTimer <= 0 && Math.random() < 0.05) {
        randomChangeDirection();
      }
      // ç§»å‹•ä½ç½®
      currentX += walkDirectionX * 1.2;
      currentY += walkDirectionY * 0.8;
      // é‚Šç•Œæª¢æ¸¬
      let hitBoundary = false;
      if (currentX <= 0) {
        currentX = 0;
        walkDirectionX = 1;
        hitBoundary = true;
      } else if (currentX >= window.innerWidth - 80) {
        currentX = window.innerWidth - 80;
        walkDirectionX = -1;
        hitBoundary = true;
      }
      if (currentY <= 5) {
        currentY = 5;
        walkDirectionY = -1;
        hitBoundary = true;
      } else if (currentY >= 50) {
        currentY = 50;
        walkDirectionY = 1;
        hitBoundary = true;
      }
      if (hitBoundary) {
        directionChangeTimer = Math.floor(Math.random() * 60) + 30;
      }
      // é¡åƒè¨­å®š
      if (walkDirectionX > 0) {
        petWrapper.style.transform = "scaleX(-1)";
      } else if (walkDirectionX < 0) {
        petWrapper.style.transform = "scaleX(1)";
      }
      // æ›´æ–°ä½ç½®
      petShell.style.right = window.innerWidth - currentX - 80 + "px";
      petShell.style.bottom = currentY + "px";
    }
    // æ˜¾ç¤ºé¼“åŠ±è¯è¯­
    function showEncouragement() {
      if (needsAttention || isDead) return;
      const randomEncouragement =
        encouragements[Math.floor(Math.random() * encouragements.length)];
      petSay.textContent = randomEncouragement;
      petSay.style.opacity = "1";
      setTimeout(() => {
        petSay.style.opacity = "0";
      }, 3000);
    }
    // åˆ›å»ºçˆ±å¿ƒç²’å­æ•ˆæœ
    function createHeartParticles(x, y) {
      for (let i = 0; i < 6; i++) {
        const heart = document.createElement("i");
        heart.className = "fa-solid fa-heart";
        heart.style.position = "fixed";
        heart.style.left = x + Math.random() * 40 - 20 + "px";
        heart.style.bottom = y + 20 + "px";
        heart.style.color = "#ff69b4";
        heart.style.fontSize = 14 + Math.random() * 8 + "px";
        heart.style.pointerEvents = "none";
        heart.style.animation = `heartFloat ${
          1 + Math.random() * 0.5
        }s ease-out forwards`;
        heart.style.zIndex = "1000";
        document.body.appendChild(heart);
        setTimeout(() => {
          if (heart.parentNode) {
            heart.remove();
          }
        }, 2000);
      }
    }
    // åœæ­¢è¡Œèµ°å¹¶æŠ–åŠ¨
    function startShaking() {
      if (needsAttention || isDead) return;
      needsAttention = true;
      isWalking = false;
      pet.style.animation = "0.2s ease-in-out infinite shake";
      petSay.textContent = "â‰ï¸";
      petSay.style.opacity = "1";
    }
    // åœæ­¢æŠ–åŠ¨å¹¶ç»§ç»­è¡Œèµ°
    function stopShaking() {
      needsAttention = false;
      isWalking = true;
      pet.style.animation = "0.6s ease-in-out infinite walk";
      petSay.style.opacity = "0";
    }
    // æª¢æ¸¬å¿«é€Ÿé»æ“Š
    function checkRapidClicks() {
      const currentTime = Date.now();
      clickTimestamps.push(currentTime);
      // ç§»é™¤10ç§’å‰çš„é»æ“Šè¨˜éŒ„
      clickTimestamps = clickTimestamps.filter(
        (timestamp) => currentTime - timestamp <= 10000
      );
      // å¦‚æœ10ç§’å…§é»æ“Šè¶…é20æ¬¡
      if (clickTimestamps.length > 20 && !isDead) {
        petDie();
      }
    }
    // å¯µç‰©æ­»äº¡å‡½æ•¸
    function petDie() {
      isDead = true;
      isWalking = false;
      needsAttention = false;
      // é¡¯ç¤ºè¡€æ¶²æ•ˆæœ
      const blood = document.getElementById("blood");
      if (blood) {
        blood.style.opacity = "1";
      }
      // åœæ­¢æ‰€æœ‰å‹•ç•«
      pet.style.animation = "none";
      // é¡¯ç¤ºæ­»äº¡è¨Šæ¯
      petSay.textContent = "å•Šå•Šå•Šå•Šå•Šå•Šå•Šå•Š";
      petSay.style.opacity = "1";
      // æ­»äº†å°±æ­»äº†ï¼Œæ°¸é ä¸å¾©æ´» ğŸ’€
    }
    // Initialize everything
    document.addEventListener('DOMContentLoaded', function() {
      // Generate content from XML
      generateContent();
      
      // Initialize dark mode based on system preference
      isDarkMode = checkSystemTheme();
      updateTheme();
      updateThemeToggleIcon();
      // Theme toggle button event listener
      document.getElementById('theme-toggle').addEventListener('click', function() {
        toggleDarkMode();
      });
      // Listen for system theme changes
      window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
        isDarkMode = event.matches;
        updateTheme();
        updateThemeToggleIcon();
      });
      // Initialize pet system
      randomizePet();
      // å–®æ“Šäº‹ä»¶ï¼ˆæª¢æ¸¬å¿«é€Ÿé»æ“Šï¼‰
      pet.addEventListener("click", function(e) {
        if (!isDead) {
          checkRapidClicks();
        }
      });
      // åŒå‡»äº‹ä»¶
      pet.addEventListener("dblclick", function(e) {
        e.preventDefault();
        if (isDead) return;
        const rect = pet.getBoundingClientRect();
        createHeartParticles(
          rect.left + rect.width / 2,
          window.innerHeight - rect.bottom
        );
        if (needsAttention) {
          stopShaking();
          setTimeout(() => {
            petSay.textContent = "æ‘¸æ‘¸~";
            petSay.style.opacity = "1";
            setTimeout(() => {
              petSay.style.opacity = "0";
            }, 2000);
          }, 500);
        }
      });
      // é˜²æ­¢æ‹–æ‹½
      pet.addEventListener("dragstart", function(e) {
        e.preventDefault();
      });
      // éš±è—/é¡¯ç¤ºåŠŸèƒ½
      const hideButton = document.getElementById("hide");
      hideButton.addEventListener("click", function() {
        if (isHidden) {
          gameShell.style.display = "inline-block";
          hideButton.innerHTML = '<i class="fa-solid fa-eye"></i>';
          isHidden = false;
        } else {
          gameShell.style.display = "none";
          hideButton.innerHTML = '<i class="fa-solid fa-eye-slash"></i>';
          isHidden = true;
        }
      });
      // ç§»åŠ¨å¾ªç¯
      setInterval(movePet, 60);
      // éšæœºè¯´è¯
      setInterval(() => {
        if (Math.random() < 0.4 && !needsAttention && !isDead) {
          showEncouragement();
        }
      }, 8000);
      // éšæœºæŠ–åŠ¨å¸å¼•æ³¨æ„
      setInterval(() => {
        if (Math.random() < 0.3 && isWalking && !needsAttention && !isDead) {
          startShaking();
          setTimeout(() => {
            if (needsAttention) {
              stopShaking();
            }
          }, 15000);
        }
      }, 20000);
      // å“åº”çª—å£å¤§å°å˜åŒ–
      window.addEventListener("resize", function() {
        currentX = Math.min(currentX, window.innerWidth - 80);
      });
      // é¡µé¢åŠ è½½å®Œæˆåå¼€å§‹è¯´è¯
      setTimeout(() => {
        petSay.textContent = "å“ˆä½¬ï¼æˆ‘ä¿‚ä½ å˜…æº«æ›¸buddyï¼";
        petSay.style.opacity = "1";
        setTimeout(() => {
          petSay.style.opacity = "0";
        }, 3000);
      }, 1000);
    });
  </script>
</body>

</html>
